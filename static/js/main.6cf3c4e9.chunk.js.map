{"version":3,"sources":["scripts/threex-artoolkitsource.js","scripts/threex-arsmoothedcontrols.js","components/SoundWave/SoundWave.js","components/SoundIcon/SoundIcon.js","components/AR/AR.js","components/App/App.js","scripts/threex-artoolkitcontext.js","scripts/threex-arbasecontrols.js","scripts/threex-armarkercontrols.js","serviceWorker.js","index.js"],"names":["window","ARjs","THREEx","Source","ArToolkitSource","parameters","_this","this","ready","domElement","sourceType","sourceUrl","sourceWidth","sourceHeight","displayWidth","displayHeight","undefined","key","newValue","console","warn","setParameters","prototype","dispose","document","getElementById","removeChild","init","onReady","onError","onSourceReady","appendChild","_initSourceImage","_initSourceVideo","_initSourceWebcam","assert","style","position","top","left","zIndex","createElement","src","width","height","interval","setInterval","naturalWidth","clearInterval","objectFit","autoplay","webkitPlaysinline","controls","loop","muted","body","addEventListener","onClick","removeEventListener","play","videoWidth","error","alert","name","message","fctName","setAttribute","navigator","mediaDevices","enumerateDevices","getUserMedia","then","devices","audio","video","facingMode","min","max","stream","srcObject","catch","domElementWidth","parseInt","domElementHeight","onResizeElement","screenWidth","innerWidth","screenHeight","innerHeight","arguments","length","nodeName","naturalHeight","videoHeight","sourceAspect","screenAspect","newWidth","marginLeft","marginTop","newHeight","copyElementSizeTo","otherElement","copySizeTo","apply","onResize","arToolkitContext","renderer","camera","trackingBackend","isAframe","dataset","aframeCanvas","arController","canvas","projectionMatrix","copy","getProjectionMatrix","ArSmoothedControls","object3d","ArBaseControls","call","visible","_lastLerpStepAt","_visibleStartedAt","_unvisibleStartedAt","lerpPosition","lerpQuaternion","lerpScale","lerpStepDelay","minVisibleDelay","minUnvisibleDelay","Object","create","constructor","update","targetObject3d","wasVisible","present","performance","now","quaternion","scale","applyOneSlerpStep","nStepsToDo","Math","floor","i","updateMatrix","dispatchEvent","type","lerp","slerp","SoundWave","fillColor","isActive","className","aria-hidden","viewBox","xmlns","classnames","fill","x","rx","defaultProps","SoundIcon","strokeColor","isMute","transform","stroke","strokeWidth","strokeLinecap","strokeLinejoin","d","x1","y1","x2","y2","AR","props","useSpring","rotation","setSpring","initialScale","patternUrl","cameraParametersUrl","modelUrl","audioUrl","audioRef","useRef","modelRef","hammerRef","pinchStartScale","panStartRotation","eventRotation","modelRotation","useState","setIsMute","isMarkerFound","setIsMarkerFound","useEffect","current","pause","MIN_SCALE","MAX_SCALE","Hammer","get","set","enable","on","e","scene","boundedScale","y","deltaRotation","PI","destroy","mixer","mixerAction","deltaTime","isMounted","isMarkerVisible","ArToolkitContext","ArMarkerControls","Scene","clock","Clock","Camera","WebGLRenderer","antialias","alpha","arToolkitSource","detectionMode","canvasWidth","canvasHeight","markerRoot","Group","add","setClearColor","Color","setSize","setPixelRatio","devicePixelRatio","GLTFLoader","load","gltf","modelScene","light3","AmbientLight","light4","PointLight","light5","AnimationMixer","clip","animations","clipAction","paused","xhr","log","loaded","total","animate","requestAnimationFrame","getDelta","render","getTracks","forEach","track","stop","ref","preload","volume","process","App","isArEnabled","setArEnabled","prevIsArEnabled","artoolkit","ARController","ARCameraParam","Context","_updatedAt","debug","matrixCodeType","baseURL","maxDetectionRate","patternRatio","imageSmoothingEnabled","indexOf","arucoContext","initialized","_arMarkersControls","assign","EventDispatcher","REVISION","createDefaultCamera","onCompleted","_initArtoolkit","srcElement","markerControls","_updateArtoolkit","addMarker","arMarkerControls","push","removeMarker","index","findIndex","marker","id","splice","_artoolkitProjectionAxisTransformMatrix","Matrix4","multiply","makeRotationY","makeRotationZ","cameraParameters","ctx","mozImageSmoothingEnabled","webkitImageSmoothingEnabled","msImageSmoothingEnabled","debugSetup","opacity","pointerEvents","AR_TEMPLATE_MATCHING_COLOR","AR_TEMPLATE_MATCHING_COLOR_AND_MATRIX","AR_TEMPLATE_MATCHING_MONO","AR_TEMPLATE_MATCHING_MONO_AND_MATRIX","setPatternDetectionMode","AR_MATRIX_CODE_3x3","AR_MATRIX_CODE_3x3_HAMMING63","AR_MATRIX_CODE_3x3_PARITY65","AR_MATRIX_CODE_4x4","AR_MATRIX_CODE_4x4_BCH_13_9_3","AR_MATRIX_CODE_4x4_BCH_13_5_5","setMatrixCodeType","setPattRatio","projectionMatrixArr","getCameraMatrix","fromArray","matrixAutoUpdate","MarkerControls","context","size","barcodeValue","changeMatrixMode","minConfidence","updateWithModelViewMatrix","modelViewMatrix","markerObject3D","tmpMatrix","markerAxisTransformMatrix","makeRotationX","matrix","getInverse","decompose","data","toArray","replace","artoolkitMarkerId","delayedInitTimerId","loadMarker","markerId","trackPatternMarkerId","trackBarcodeMarkerId","event","PATTERN_MARKER","idPatt","onMarkerFound","BARCODE_MARKER","idMatrix","UNKNOWN_MARKER","postInit","cfPatt","cfMatt","Boolean","location","hostname","match","ReactDOM","StrictMode","serviceWorker","registration","unregister"],"mappings":"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","file":"static/js/main.6cf3c4e9.chunk.js","sourcesContent":["window.ARjs = window.ARjs || {};\r\nwindow.THREEx = window.THREEx || {};\r\n\r\nconst { ARjs, THREEx } = window;\r\n\r\nARjs.Source = THREEx.ArToolkitSource = function(parameters){\t\r\n\tvar _this = this\r\n\r\n\tthis.ready = false\r\n  this.domElement = null\r\n\r\n\t// handle default parameters\r\n\tthis.parameters = {\r\n\t\t// type of source - ['webcam', 'image', 'video']\r\n\t\tsourceType : 'webcam',\r\n\t\t// url of the source - valid if sourceType = image|video\r\n\t\tsourceUrl : null,\r\n\t\t\r\n\t\t// resolution of at which we initialize in the source image\r\n\t\tsourceWidth: 640,\r\n\t\tsourceHeight: 480,\r\n\t\t// resolution displayed for the source \r\n\t\tdisplayWidth: 640,\r\n\t\tdisplayHeight: 480,\r\n\t}\r\n\t//////////////////////////////////////////////////////////////////////////////\r\n\t//\t\tsetParameters\r\n\t//////////////////////////////////////////////////////////////////////////////\r\n\tsetParameters(parameters)\r\n\tfunction setParameters(parameters){\r\n\t\tif( parameters === undefined )\treturn\r\n\t\tfor( var key in parameters ){\r\n\t\t\tvar newValue = parameters[ key ]\r\n\r\n\t\t\tif( newValue === undefined ){\r\n\t\t\t\tconsole.warn( \"THREEx.ArToolkitSource: '\" + key + \"' parameter is undefined.\" )\r\n\t\t\t\tcontinue\r\n\t\t\t}\r\n\r\n\t\t\tvar currentValue = _this.parameters[ key ]\r\n\r\n\t\t\tif( currentValue === undefined ){\r\n\t\t\t\tconsole.warn( \"THREEx.ArToolkitSource: '\" + key + \"' is not a property of this material.\" )\r\n\t\t\t\tcontinue\r\n\t\t\t}\r\n\r\n\t\t\t_this.parameters[ key ] = newValue\r\n\t\t}\r\n\t}\t\r\n}\r\n\r\n//////////////////////////////////////////////////////////////////////////////\r\n//\t\tCode Separator\r\n//////////////////////////////////////////////////////////////////////////////\r\n\r\nARjs.Source.prototype.dispose = function(){\r\n\tvar _this = this;\r\n\r\n\tdocument.getElementById('ar-container').removeChild(_this.domElement);\r\n};\r\n\r\nARjs.Source.prototype.init = function(onReady, onError){\r\n\tvar _this = this;\r\n\r\n\tfunction onSourceReady() {\r\n\t\tdocument.getElementById('ar-container').appendChild(_this.domElement);\r\n\t\t_this.ready = true;\r\n\t\tonReady && onReady();\r\n\t}\r\n\r\n\tvar domElement;\r\n\r\n\tif(this.parameters.sourceType === 'image') {\r\n\t\tdomElement = this._initSourceImage(onSourceReady, onError)\r\n\t} else if( this.parameters.sourceType === 'video' ) {\r\n\t\tdomElement = this._initSourceVideo(onSourceReady, onError)\r\n\t} else if( this.parameters.sourceType === 'webcam' ) {\r\n\t\tdomElement = this._initSourceWebcam(onSourceReady, onError)\r\n\t} else {\r\n\t\tconsole.assert(false)\r\n\t}\r\n\r\n\t// attach\r\n        this.domElement = domElement\r\n        this.domElement.style.position = 'absolute'\r\n        this.domElement.style.top = '0px'\r\n        this.domElement.style.left = '0px'\r\n        this.domElement.style.zIndex = '-2'\r\n\r\n\treturn this;\r\n} \r\n\r\n////////////////////////////////////////////////////////////////////////////////\r\n//          init image source\r\n////////////////////////////////////////////////////////////////////////////////\r\n\r\n\r\nARjs.Source.prototype._initSourceImage = function(onReady) {\r\n\t// TODO make it static\r\n        var domElement = document.createElement('img')\r\n\tdomElement.src = this.parameters.sourceUrl\r\n\r\n\tdomElement.width = this.parameters.sourceWidth\r\n\tdomElement.height = this.parameters.sourceHeight\r\n\tdomElement.style.width = this.parameters.displayWidth+'px'\r\n\tdomElement.style.height = this.parameters.displayHeight+'px'\r\n\r\n\t// wait until the video stream is ready\r\n\tvar interval = setInterval(function() {\r\n\t\tif (!domElement.naturalWidth)\treturn;\r\n\t\tonReady()\r\n\t\tclearInterval(interval)\r\n\t}, 1000/50);\r\n\r\n\treturn domElement                \r\n}\r\n\r\n////////////////////////////////////////////////////////////////////////////////\r\n//          init video source\r\n////////////////////////////////////////////////////////////////////////////////\r\n\r\n\r\nARjs.Source.prototype._initSourceVideo = function(onReady) {\r\n\t// TODO make it static\r\n\tvar domElement = document.createElement('video');\r\n\tdomElement.src = this.parameters.sourceUrl\r\n\r\n\tdomElement.style.objectFit = 'initial'\r\n\r\n\tdomElement.autoplay = true;\r\n\tdomElement.webkitPlaysinline = true;\r\n\tdomElement.controls = false;\r\n\tdomElement.loop = true;\r\n\tdomElement.muted = true\r\n\r\n\t// trick to trigger the video on android\r\n\tdocument.body.addEventListener('click', function onClick(){\r\n\t\tdocument.body.removeEventListener('click', onClick);\r\n\t\tdomElement.play()\r\n\t})\r\n\r\n\tdomElement.width = this.parameters.sourceWidth\r\n\tdomElement.height = this.parameters.sourceHeight\r\n\tdomElement.style.width = this.parameters.displayWidth+'px'\r\n\tdomElement.style.height = this.parameters.displayHeight+'px'\r\n\t\r\n\t// wait until the video stream is ready\r\n\tvar interval = setInterval(function() {\r\n\t\tif (!domElement.videoWidth)\treturn;\r\n\t\tonReady()\r\n\t\tclearInterval(interval)\r\n\t}, 1000/50);\r\n\treturn domElement\r\n}\r\n\r\n////////////////////////////////////////////////////////////////////////////////\r\n//          handle webcam source\r\n////////////////////////////////////////////////////////////////////////////////\r\n\r\nARjs.Source.prototype._initSourceWebcam = function(onReady, onError) {\r\n\t// var _this = this\r\n\r\n\t// init default value\r\n\tonError = onError || function(error){\t\r\n\t\talert('Webcam Error\\nName: '+error.name + '\\nMessage: '+error.message)\r\n\t}\r\n\r\n\tvar domElement = document.createElement('video');\r\n\tdomElement.setAttribute('autoplay', '');\r\n\tdomElement.setAttribute('muted', '');\r\n\tdomElement.setAttribute('playsinline', '');\r\n\tdomElement.style.width = this.parameters.displayWidth+'px'\r\n\tdomElement.style.height = this.parameters.displayHeight+'px'\r\n\r\n\tvar fctName;\r\n\r\n\t// check API is available\r\n\tif (navigator.mediaDevices === undefined \r\n\t\t\t|| navigator.mediaDevices.enumerateDevices === undefined \r\n\t\t\t|| navigator.mediaDevices.getUserMedia === undefined  ){\r\n\t\tif( navigator.mediaDevices === undefined )\t\t\t\tfctName = 'navigator.mediaDevices'\r\n\t\telse if( navigator.mediaDevices.enumerateDevices === undefined )\tfctName = 'navigator.mediaDevices.enumerateDevices'\r\n\t\telse if( navigator.mediaDevices.getUserMedia === undefined )\t\tfctName = 'navigator.mediaDevices.getUserMedia'\r\n\t\telse console.assert(false)\r\n\t\tonError({\r\n\t\t\tname: '',\r\n\t\t\tmessage: 'WebRTC issue-! '+fctName+' not present in your browser'\r\n\t\t})\r\n\t\treturn null\r\n\t}\r\n\r\n\t// get available devices\r\n\tnavigator.mediaDevices.enumerateDevices().then(function(devices) {\r\n\t\tvar userMediaConstraints = {\r\n\t\t\taudio: false,\r\n\t\t\tvideo: {\r\n\t\t\t\tfacingMode: 'environment',\r\n\t\t\t\twidth: {\r\n\t\t\t\t\t// ideal: _this.parameters.sourceWidth,\r\n\t\t\t\t\tmin: 640,\r\n\t\t\t\t\tmax: 1920\r\n\t\t\t\t},\r\n\t\t\t\theight: {\r\n\t\t\t\t\t// ideal: _this.parameters.sourceHeight,\r\n\t\t\t\t\tmin: 480,\r\n\t\t\t\t\tmax: 1080\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t// get a device which satisfy the constraints\r\n\t\tnavigator.mediaDevices.getUserMedia(userMediaConstraints).then(function success(stream) {\r\n\t\t\t// set the .src of the domElement\r\n\t\t\tdomElement.srcObject = stream;\r\n\t\t\tdocument.body.addEventListener('click', () => domElement.play())\r\n\r\n\t\t\t// wait until the video stream is ready\r\n\t\t\tvar interval = setInterval(function() {\r\n\t\t\t\tif (!domElement.videoWidth)\treturn;\r\n\t\t\t\tonReady()\r\n\t\t\t\tclearInterval(interval)\r\n\t\t\t}, 1000/50);\r\n\t\t}).catch(function(error) {\r\n\t\t\tonError({\r\n\t\t\t\tname: error.name,\r\n\t\t\t\tmessage: error.message\r\n\t\t\t});\r\n\t\t});\r\n\t}).catch(function(error) {\r\n\t\tonError({\r\n\t\t\tmessage: error.message\r\n\t\t});\r\n\t});\r\n\r\n\treturn domElement\r\n}\r\n\r\nARjs.Source.prototype.domElementWidth = function(){\r\n\treturn parseInt(this.domElement.style.width)\r\n}\r\nARjs.Source.prototype.domElementHeight = function(){\r\n\treturn parseInt(this.domElement.style.height)\r\n}\r\n\r\n////////////////////////////////////////////////////////////////////////////////\r\n//          handle resize\r\n////////////////////////////////////////////////////////////////////////////////\r\n\r\nARjs.Source.prototype.onResizeElement = function(){\r\n\tvar screenWidth = window.innerWidth\r\n\tvar screenHeight = window.innerHeight\r\n\r\n\t// sanity check\r\n\tconsole.assert( arguments.length === 0 )\r\n\r\n\t// compute sourceWidth, sourceHeight\r\n\tvar sourceWidth;\r\n\tvar sourceHeight;\r\n\tif( this.domElement.nodeName === \"IMG\" ){\r\n\t\tsourceWidth = this.domElement.naturalWidth\r\n\t\tsourceHeight = this.domElement.naturalHeight\r\n\t}else if( this.domElement.nodeName === \"VIDEO\" ){\r\n\t\tsourceWidth = this.domElement.videoWidth\r\n\t\tsourceHeight = this.domElement.videoHeight\r\n\t}else{\r\n\t\tconsole.assert(false)\r\n\t}\r\n\t\r\n\t// compute sourceAspect\r\n\tvar sourceAspect = sourceWidth / sourceHeight\r\n\t// compute screenAspect\r\n\tvar screenAspect = screenWidth / screenHeight\r\n\r\n\t// if screenAspect < sourceAspect, then change the width, else change the height\r\n\tif( screenAspect < sourceAspect ){\r\n\t\t// compute newWidth and set .width/.marginLeft\r\n\t\tvar newWidth = sourceAspect * screenHeight\r\n\t\tthis.domElement.style.width = newWidth+'px'\r\n\t\tthis.domElement.style.marginLeft = -(newWidth-screenWidth)/2+'px'\r\n\t\t\r\n\t\t// init style.height/.marginTop to normal value\r\n\t\tthis.domElement.style.height = screenHeight+'px'\r\n\t\tthis.domElement.style.marginTop = '0px'\r\n\t}else{\r\n\t\t// compute newHeight and set .height/.marginTop\r\n\t\tvar newHeight = 1 / (sourceAspect / screenWidth)\r\n\t\tthis.domElement.style.height = newHeight+'px'\r\n\t\tthis.domElement.style.marginTop = -(newHeight-screenHeight)/2+'px'\r\n\t\t\r\n\t\t// init style.width/.marginLeft to normal value\r\n\t\tthis.domElement.style.width = screenWidth+'px'\r\n\t\tthis.domElement.style.marginLeft = '0px'\r\n\t}\r\n}\r\n\r\nARjs.Source.prototype.copyElementSizeTo = function(otherElement){\r\n\r\n\tif (window.innerWidth > window.innerHeight)\r\n\t{\r\n\t\t//landscape\r\n\t\totherElement.style.width = this.domElement.style.width\r\n\t\totherElement.style.height = this.domElement.style.height\r\n\t\totherElement.style.marginLeft = this.domElement.style.marginLeft\r\n\t\totherElement.style.marginTop = this.domElement.style.marginTop\r\n\t}\r\n\telse {\r\n\t\t//portrait\r\n\t\totherElement.style.height = this.domElement.style.height\r\n\t\totherElement.style.width = (parseInt(otherElement.style.height) * 4/3)+\"px\";\r\n\t\totherElement.style.marginLeft = ((window.innerWidth- parseInt(otherElement.style.width))/2)+\"px\";\r\n\t\totherElement.style.marginTop = 0;\r\n\t}\r\n\r\n}\r\n\r\n//////////////////////////////////////////////////////////////////////////////\r\n//\t\tCode Separator\r\n//////////////////////////////////////////////////////////////////////////////\r\n\r\nARjs.Source.prototype.copySizeTo = function(){\r\n\tconsole.warn('obsolete function arToolkitSource.copySizeTo. Use arToolkitSource.copyElementSizeTo' )\r\n\tthis.copyElementSizeTo.apply(this, arguments)\r\n}\r\n\r\n//////////////////////////////////////////////////////////////////////////////\r\n//\t\tCode Separator\r\n//////////////////////////////////////////////////////////////////////////////\r\n\r\nARjs.Source.prototype.onResize\t= function(arToolkitContext, renderer, camera){\r\n\tif( arguments.length !== 3 ){\r\n\t\tconsole.warn('obsolete function arToolkitSource.onResize. Use arToolkitSource.onResizeElement' )\r\n\t\treturn this.onResizeElement.apply(this, arguments)\r\n\t}\r\n\r\n\tvar trackingBackend = arToolkitContext.parameters.trackingBackend\r\n\t\r\n\r\n\t// RESIZE DOMELEMENT\r\n\tif(trackingBackend === 'artoolkit') {\r\n\t\tthis.onResizeElement()\r\n\t\tvar isAframe = renderer.domElement.dataset.aframeCanvas ? true : false\r\n\t\tif( isAframe === false ){\r\n\t\t\tthis.copyElementSizeTo(renderer.domElement)\t\r\n\t\t}else{\r\n\t\t\t\r\n\t\t}\r\n\r\n\t\tif( arToolkitContext.arController !== null ){\r\n\t\t\tthis.copyElementSizeTo(arToolkitContext.arController.canvas)\t\r\n\t\t}\r\n\t}else console.assert(false, 'unhandled trackingBackend '+trackingBackend)\r\n\r\n\r\n\t// UPDATE CAMERA\r\n\tif( trackingBackend === 'artoolkit' ){\r\n\t\tif( arToolkitContext.arController !== null ){\r\n\t\t\tcamera.projectionMatrix.copy(arToolkitContext.getProjectionMatrix());\r\n\t\t}\r\n\t}else console.assert(false, 'unhandled trackingBackend '+trackingBackend)\t\r\n}\r\n","window.THREEx = window.THREEx || {};\n\nconst { THREEx } = window;\n\n/**\n * - lerp position/quaternino/scale\n * - minDelayDetected\n * - minDelayUndetected\n * @param {[type]} object3d   [description]\n * @param {[type]} parameters [description]\n */\nTHREEx.ArSmoothedControls = function(object3d, parameters){\n\tvar _this = this\n\t\n\tTHREEx.ArBaseControls.call(this, object3d)\n\t\n\t// copy parameters\n\tthis.object3d.visible = false\n\t\n\tthis._lastLerpStepAt = null\n\tthis._visibleStartedAt = null\n\tthis._unvisibleStartedAt = null\n\n\t// handle default parameters\n\tparameters = parameters || {}\n\tthis.parameters = {\n\t\t// lerp coeficient for the position - between [0,1] - default to 1\n\t\tlerpPosition: 0.8,\n\t\t// lerp coeficient for the quaternion - between [0,1] - default to 1\n\t\tlerpQuaternion: 0.2,\n\t\t// lerp coeficient for the scale - between [0,1] - default to 1\n\t\tlerpScale: 0.7,\n\t\t// delay for lerp fixed steps - in seconds - default to 1/120\n\t\tlerpStepDelay: 1/60,\n\t\t// minimum delay the sub-control must be visible before this controls become visible - default to 0 seconds\n\t\tminVisibleDelay: 0.0,\n\t\t// minimum delay the sub-control must be unvisible before this controls become unvisible - default to 0 seconds\n\t\tminUnvisibleDelay: 0.2,\n\t}\n\t\n\t//////////////////////////////////////////////////////////////////////////////\n\t//\t\tsetParameters\n\t//////////////////////////////////////////////////////////////////////////////\n\tsetParameters(parameters)\n\tfunction setParameters(parameters){\n\t\tif( parameters === undefined )\treturn\n\t\tfor( var key in parameters ){\n\t\t\tvar newValue = parameters[ key ]\n\n\t\t\tif( newValue === undefined ){\n\t\t\t\tconsole.warn( \"THREEx.ArSmoothedControls: '\" + key + \"' parameter is undefined.\" )\n\t\t\t\tcontinue\n\t\t\t}\n\n\t\t\tvar currentValue = _this.parameters[ key ]\n\n\t\t\tif( currentValue === undefined ){\n\t\t\t\tconsole.warn( \"THREEx.ArSmoothedControls: '\" + key + \"' is not a property of this material.\" )\n\t\t\t\tcontinue\n\t\t\t}\n\n\t\t\t_this.parameters[ key ] = newValue\n\t\t}\n\t}\n}\n\t\nTHREEx.ArSmoothedControls.prototype = Object.create( THREEx.ArBaseControls.prototype );\nTHREEx.ArSmoothedControls.prototype.constructor = THREEx.ArSmoothedControls;\n\n//////////////////////////////////////////////////////////////////////////////\n//\t\tupdate function\n//////////////////////////////////////////////////////////////////////////////\n\nTHREEx.ArSmoothedControls.prototype.update = function(targetObject3d){\n\tvar object3d = this.object3d\n\tvar parameters = this.parameters\n\tvar wasVisible = object3d.visible\n\tvar present = performance.now()/1000\n\n\n\t//////////////////////////////////////////////////////////////////////////////\n\t//\t\thandle object3d.visible with minVisibleDelay/minUnvisibleDelay\n\t//////////////////////////////////////////////////////////////////////////////\n\tif( targetObject3d.visible === false )\tthis._visibleStartedAt = null\n\tif( targetObject3d.visible === true )\tthis._unvisibleStartedAt = null\n\n\tif( targetObject3d.visible === true && this._visibleStartedAt === null )\tthis._visibleStartedAt = present\n\tif( targetObject3d.visible === false && this._unvisibleStartedAt === null )\tthis._unvisibleStartedAt = present\n\n\tif( wasVisible === false && targetObject3d.visible === true ){\n\t\tvar visibleFor = present - this._visibleStartedAt\n\t\tif( visibleFor >= this.parameters.minVisibleDelay ){\n\t\t\tobject3d.visible = true\n\t\t\tsnapDirectlyToTarget()\n\t\t}\n\t\t// console.log('visibleFor', visibleFor)\n\t}\n\n\tif( wasVisible === true && targetObject3d.visible === false ){\n\t\tvar unvisibleFor = present - this._unvisibleStartedAt\n\t\tif( unvisibleFor >= this.parameters.minUnvisibleDelay ){\n\t\t\tobject3d.visible = false\t\t\t\n\t\t}\n\t}\n\t\n\t//////////////////////////////////////////////////////////////////////////////\n\t//\t\tapply lerp on positon/quaternion/scale\n\t//////////////////////////////////////////////////////////////////////////////\n\n\t// apply lerp steps - require fix time steps to behave the same no matter the fps\n\tif( this._lastLerpStepAt === null ){\n\t\tapplyOneSlerpStep()\n\t\tthis._lastLerpStepAt = present\n\t}else{\n\t\tvar nStepsToDo = Math.floor( (present - this._lastLerpStepAt)/this.parameters.lerpStepDelay )\n\t\tfor(var i = 0; i < nStepsToDo; i++){\n\t\t\tapplyOneSlerpStep()\n\t\t\tthis._lastLerpStepAt += this.parameters.lerpStepDelay\n\t\t}\n\t}\n\n\t// disable the lerp by directly copying targetObject3d position/quaternion/scale\n\tif( false ){\t\t\n\t\tsnapDirectlyToTarget()\n\t}\n\n\t// update the matrix\n\tthis.object3d.updateMatrix()\n\n\t//////////////////////////////////////////////////////////////////////////////\n\t//\t\thonor becameVisible/becameUnVisible event\n\t//////////////////////////////////////////////////////////////////////////////\n\t// honor becameVisible event\n\tif( wasVisible === false && object3d.visible === true ){\n\t\tthis.dispatchEvent({ type: 'becameVisible' })\n\t}\n\t// honor becameUnVisible event\n\tif( wasVisible === true && object3d.visible === false ){\n\t\tthis.dispatchEvent({ type: 'becameUnVisible' })\n\t}\n\treturn\n\n\tfunction snapDirectlyToTarget(){\n\t\tobject3d.position.copy( targetObject3d.position )\n\t\tobject3d.quaternion.copy( targetObject3d.quaternion )\n\t\tobject3d.scale.copy( targetObject3d.scale )\n\t}\t\n\t\n\tfunction applyOneSlerpStep(){\n\t\tobject3d.position.lerp(targetObject3d.position, parameters.lerpPosition)\n\t\tobject3d.quaternion.slerp(targetObject3d.quaternion, parameters.lerpQuaternion)\n\t\tobject3d.scale.lerp(targetObject3d.scale, parameters.lerpScale)\n\t}\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\n\nimport './SoundWave.css';\n\nconst SoundWave = ({ width, height, style, fillColor, isActive, className }) => (\n  <svg\n    style={style}\n    width={width}\n    height={height}\n    aria-hidden='true'\n    viewBox='0 0 48 48'\n    xmlns='http://www.w3.org/2000/svg'\n    className={classnames(className, isActive && 'sound-wave--active')}\n  >\n    <g fill={fillColor}>\n      <rect className='sound-wave-bar sound-wave-bar-1' x='4.9' rx='1.5' />\n      <rect className='sound-wave-bar sound-wave-bar-2' x='13.5' rx='1.5' />\n      <rect className='sound-wave-bar sound-wave-bar-3' x='22.1' rx='1.5' />\n      <rect className='sound-wave-bar sound-wave-bar-2' x='30.7' rx='1.5' />\n      <rect className='sound-wave-bar sound-wave-bar-1' x='39.5' rx='1.5' />\n    </g>\n  </svg>\n);\n\nSoundWave.defaultProps = {\n  width               : '24',\n  height              : '24',\n  fillColor           : '#fff'\n};\n\nSoundWave.propTypes = {\n  style               : PropTypes.object,\n  width               : PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  height              : PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  className           : PropTypes.string,\n  fillColor           : PropTypes.string\n};\n\nexport default SoundWave;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst SoundIcon = ({ width, height, style, strokeColor, isMute }) => (\n  <svg\n    style={style}\n    width={width}\n    height={height}\n    aria-hidden='true'\n    viewBox='0 0 24 24'\n    xmlns='http://www.w3.org/2000/svg'\n  >\n    <g transform='translate(1, 3)' stroke={strokeColor} strokeWidth='1.5' fill='none' strokeLinecap='round' strokeLinejoin='round'>\n        <path d='M5.57,6.06 L1.25,6.06 C0.84,6.06 0.5,6.4 0.5,6.8 L0.5,11.36 C0.5,11.78 0.84,12.12 1.25,12.12 L5.57,12.12 C6.7,15.03 9.34,17.06 12.43,17.38 C12.64,17.4 12.85,17.33 13,17.18 C13.16,17.04 13.25,16.84 13.25,16.62 L13.25,1.55 C13.25,1.34 13.16,1.13 13,1 C12.85,0.85 12.64,0.78 12.43,0.8 C9.34,1.11 6.7,3.15 5.57,6.06 Z' />\n        {isMute ? (\n          <>\n            <line x1='21.32' y1='7' x2='17' y2='11.5' />\n            <line x1='17' y1='7' x2='21.32' y2='11.5' />\n          </>\n        ) : (\n          <>\n            <path d='M20.46,12.67 C21.85,10.49 21.85,7.69 20.46,5.5' />\n            <path d='M17.56,11.357 C18.6,10.06 18.6,8.2 17.56,6.9' />\n          </>\n        )}\n    </g>\n  </svg>\n);\n\nSoundIcon.defaultProps = {\n  width               : '24',\n  height              : '24',\n  strokeColor         : '#fff'\n};\n\nSoundIcon.propTypes = {\n  style               : PropTypes.object,\n  width               : PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  height              : PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  className           : PropTypes.string,\n  fillColor           : PropTypes.string\n};\n\nexport default SoundIcon;\n","import Hammer from 'hammerjs';\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport { Scene, Camera, WebGLRenderer, Group, Color, PointLight, AmbientLight, AnimationMixer, Clock } from 'three';\r\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader';\r\n\r\nimport SoundWave from 'components/SoundWave';\r\nimport SoundIcon from 'components/SoundIcon';\r\n\r\nimport './AR.css';\r\nimport { useSpring } from '@react-spring/core';\r\n\r\nconst AR = props => {\r\n  const [springProps, setSpring] = useSpring(() => ({ rotation: 0 }))\r\n  const { initialScale, patternUrl, cameraParametersUrl, modelUrl, audioUrl } = props;\r\n  const audioRef = useRef();\r\n  const modelRef = useRef();\r\n  const hammerRef = useRef();\r\n  const pinchStartScale = useRef();\r\n  const panStartRotation = useRef({ eventRotation: 0, modelRotation: 0 });\r\n  const [isMute, setIsMute] = useState(false);\r\n  const [isMarkerFound, setIsMarkerFound] = useState(false);\r\n\r\n\r\n  useEffect(() => {\r\n    if (isMarkerFound) {\r\n      audioRef.current.play();\r\n    } else {\r\n      audioRef.current.pause();\r\n    }\r\n  }, [isMarkerFound])\r\n\r\n  useEffect(() => {\r\n    const onPinchStart = e => {\r\n      if (modelRef.current) {\r\n        pinchStartScale.current = modelRef.current.scene.scale.x;\r\n      }\r\n    };\r\n\r\n    const onRotateStart = e => {\r\n      if (modelRef.current) {\r\n        panStartRotation.current = {\r\n          modelRotation: modelRef.current.scene.rotation.y,\r\n          eventRotation: e.rotation\r\n        };\r\n      }\r\n    };\r\n\r\n    const MIN_SCALE = initialScale / 3;\r\n    const MAX_SCALE = initialScale * 3;\r\n\r\n    hammerRef.current = new Hammer(document.getElementById('ar-container'));\r\n    hammerRef.current.get('pan').set({ enable: false });\r\n    hammerRef.current.get('pinch').set({ enable: true });\r\n    hammerRef.current.get('rotate').set({ enable: true });\r\n    hammerRef.current.on('pinchstart', onPinchStart);\r\n    hammerRef.current.on('pinch', e => {\r\n      if (pinchStartScale.current && modelRef.current) {\r\n        const scale = pinchStartScale.current * e.scale;\r\n        const boundedScale = Math.min(Math.max(scale, MIN_SCALE), MAX_SCALE);\r\n\r\n        modelRef.current.scene.scale.set(boundedScale, boundedScale, boundedScale);\r\n      }\r\n    });\r\n    hammerRef.current.on('rotatestart', onRotateStart);\r\n    hammerRef.current.on('rotate', e => {\r\n      if (modelRef.current) {\r\n        const deltaRotationAngle = e.rotation - panStartRotation.current.eventRotation;\r\n        const deltaRotation = deltaRotationAngle / 180 * Math.PI;\r\n\r\n        modelRef.current.scene.rotation.y = panStartRotation.current.modelRotation - deltaRotation;\r\n        setSpring({ rotation: panStartRotation.current.modelRotation - deltaRotation });\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      hammerRef.current.destroy();\r\n    }\r\n  }, [initialScale, setSpring])\r\n\r\n  useEffect(() => {\r\n    let mixer;\r\n    let mixerAction;\r\n    let deltaTime = 0;\r\n    let isMounted = true;\r\n    let isMarkerVisible = false;\r\n    const { width, height } = { width: 640, height: 480 };\r\n    const { ArToolkitSource, ArToolkitContext, ArMarkerControls } = window.THREEx;\r\n    const scene = new Scene();\r\n    const clock = new Clock();\r\n    const camera = new Camera();\r\n    const renderer = new WebGLRenderer({\r\n      antialias: true,\r\n      alpha: true\r\n    });\r\n    const arToolkitSource = new ArToolkitSource({\r\n      sourceType: 'webcam',\r\n      sourceWidth: width,\r\n      sourceHeight: height,\r\n      displayWidth: width,\r\n      displayHeight: height\r\n    });\r\n    const arToolkitContext = new ArToolkitContext({\r\n      cameraParametersUrl,\r\n      detectionMode: 'mono',\r\n      canvasWidth: width,\r\n      canvasHeight: height\r\n    });\r\n    const markerRoot = new Group();\r\n\r\n    const onResize = () => {\r\n      arToolkitSource.onResizeElement();\r\n      arToolkitSource.copyElementSizeTo(renderer.domElement);\r\n      if (arToolkitContext.arController !== null) {\r\n        arToolkitSource.copyElementSizeTo(arToolkitContext.arController.canvas);\r\n      }\r\n    };\r\n  \r\n    scene.add(camera);\r\n    renderer.setClearColor(new Color('lightgrey'), 0)\r\n    renderer.setSize(width, height);\r\n    renderer.setPixelRatio(window.devicePixelRatio);\r\n    renderer.domElement.style.position = 'absolute';\r\n    renderer.domElement.style.top = '0px';\r\n    renderer.domElement.style.left = '0px';\r\n    document.getElementById('ar-container').appendChild(renderer.domElement);\r\n  \r\n    arToolkitSource.init(onResize);\r\n\r\n    window.addEventListener('resize', onResize);\r\n\r\n    arToolkitContext.init(() => {\r\n      camera.projectionMatrix.copy(arToolkitContext.getProjectionMatrix());\r\n    });\r\n\r\n    new ArMarkerControls(arToolkitContext, markerRoot, {\r\n      type: 'pattern',\r\n      patternUrl\r\n    })\r\n\r\n    function onProgress(xhr) {\r\n      console.log((xhr.loaded / xhr.total * 100) + '% loaded');\r\n    }\r\n\r\n    function onError(error) {\r\n      console.log('An error happened:', error);\r\n    }\r\n\r\n    new GLTFLoader()\r\n      .load(modelUrl, gltf => {\r\n        modelRef.current = gltf;\r\n        const modelScene = gltf.scene;\r\n\r\n        modelScene.scale.set(initialScale, initialScale, initialScale);\r\n\r\n        var light3 = new AmbientLight(0xffffff, 1);\r\n        markerRoot.add(light3);\r\n  \r\n        var light4 = new PointLight(0xffffff, 1, 0, 2);\r\n        light4.position.set(0, 1, 1);\r\n        markerRoot.add(light4);\r\n\r\n        var light5 = new PointLight(0xffffff, 1, 0, 2);\r\n        light5.position.set(0, 1, -1);\r\n        markerRoot.add(light5);\r\n\r\n        markerRoot.add(modelScene);\r\n\r\n        mixer = new AnimationMixer(modelScene);\r\n        const clip = gltf.animations[0];\r\n\r\n        mixerAction = mixer.clipAction(clip);\r\n        mixerAction.play();\r\n        mixerAction.paused = !isMarkerVisible;\r\n        \r\n        scene.add(markerRoot);\r\n      }, onProgress, onError);\r\n\r\n    const render = () => {\r\n      renderer.render(scene, camera);\r\n    };\r\n\r\n    const update = () => {\r\n      if (isMarkerVisible !== markerRoot.visible) {\r\n        isMarkerVisible = markerRoot.visible;\r\n        setIsMarkerFound(markerRoot.visible);\r\n\r\n        if (mixerAction) {\r\n          mixerAction.paused = !isMarkerVisible;\r\n        }\r\n      }\r\n\r\n      if (mixer) {\r\n        mixer.update(deltaTime);\r\n      }\r\n  \r\n      if (arToolkitSource.ready !== false) {\r\n        arToolkitContext.update(arToolkitSource.domElement);\r\n      }\r\n    };\r\n    \r\n    \r\n    const animate = () => {\r\n      if (isMounted) {\r\n        requestAnimationFrame(animate);\r\n        deltaTime = clock.getDelta();\r\n        update();\r\n        render();\r\n      }\r\n    };\r\n\r\n    animate();\r\n\r\n    return () => {\r\n      isMounted = false;\r\n      if (arToolkitSource.domElement.srcObject) {\r\n        arToolkitSource.domElement.srcObject.getTracks()\r\n          .forEach(track => track.stop());\r\n      }\r\n      try {\r\n        document.getElementById('ar-container').removeChild(renderer.domElement);\r\n        document.getElementById('ar-container').removeChild(arToolkitSource.domElement);\r\n      } catch {\r\n        // no throw\r\n      }\r\n    };\r\n  }, [initialScale, cameraParametersUrl, patternUrl, modelUrl]);\r\n\r\n  return (\r\n    <div>\r\n        <div className='ar-icons-overlay' />\r\n        <audio\r\n          loop\r\n          ref={audioRef}\r\n          preload='auto'\r\n        >\r\n          <source\r\n            src={audioUrl}\r\n            type='audio/mpeg'\r\n          />\r\n        </audio>\r\n        <button\r\n          className='ar-icon ar-icon-sound'\r\n          onClick={() => {\r\n            setIsMute(!isMute);\r\n            audioRef.current.volume = isMute ? 1 : 0;\r\n          }}\r\n        >\r\n          <SoundIcon\r\n            width={32}\r\n            height={32}\r\n            isMute={isMute}\r\n          />\r\n        </button>\r\n        <SoundWave\r\n          width={32}\r\n          height={32}\r\n          isActive={isMarkerFound}\r\n          className='ar-icon ar-icon-wave'\r\n        />\r\n    </div>\r\n  );\r\n};\r\n\r\nAR.defaultProps = {\r\n  initialScale: 0.0005,\r\n  audioUrl: `${process.env.PUBLIC_URL}/audio/anchor.mp3`,\r\n  modelUrl: `${process.env.PUBLIC_URL}/models/anchor/MiraiKoukai6.gltf`,\r\n  patternUrl: `${process.env.PUBLIC_URL}/data/hiro.patt`,\r\n  cameraParametersUrl: `${process.env.PUBLIC_URL}/data/camera_para.dat`\r\n};\r\n\r\nexport default AR;\r\n","import React, { useState } from 'react';\n\nimport AR from 'components/AR';\n// import TestScene from 'components/Scene';\n\nimport './App.css';\n\n/* import AR2 from 'components/AR2';\nimport Scene2 from 'components/Scene2'; */\n\n\nfunction App() {\n  const [isArEnabled, setArEnabled] = useState(false);\n  return (\n    <div className='App'>\n      <button\n        className='App-button'\n        onClick={() => setArEnabled(prevIsArEnabled => !prevIsArEnabled)}\n      >\n        {isArEnabled ? 'Disable' : 'Enable'} AR\n      </button>\n      {isArEnabled &&\n        <AR />\n      }\n      {/* <TestScene /> */}\n      {/* <Scene2 /> */}\n    </div>\n  );\n}\n\nexport default App;\n","import { Camera, EventDispatcher, Matrix4 } from 'three';\n\nwindow.ARjs = window.ARjs || {};\nwindow.THREEx = window.THREEx || {};\n\nconst { ARjs, THREEx, artoolkit, ARController, ARCameraParam } = window;\n\nARjs.Context = THREEx.ArToolkitContext = function(parameters){\n\tvar _this = this\n\n\t_this._updatedAt = null\n\n\t// handle default parameters\n\tthis.parameters = {\n\t\t// AR backend - ['artoolkit']\n\t\ttrackingBackend: 'artoolkit',\n\t\t// debug - true if one should display artoolkit debug canvas, false otherwise\n\t\tdebug: false,\n\t\t// the mode of detection - ['color', 'color_and_matrix', 'mono', 'mono_and_matrix']\n\t\tdetectionMode: 'mono',\n\t\t// type of matrix code - valid iif detectionMode end with 'matrix' - [3x3, 3x3_HAMMING63, 3x3_PARITY65, 4x4, 4x4_BCH_13_9_3, 4x4_BCH_13_5_5]\n\t\tmatrixCodeType: '3x3',\n\n\t\t// url of the camera parameters\n\t\tcameraParametersUrl: ARjs.Context.baseURL + 'parameters/camera_para.dat',\n\n\t\t// tune the maximum rate of pose detection in the source image\n\t\tmaxDetectionRate: 60,\n\t\t// resolution of at which we detect pose in the source image\n\t\tcanvasWidth: 640,\n\t\tcanvasHeight: 480,\n\n\t\t// the patternRatio inside the artoolkit marker - artoolkit only\n\t\tpatternRatio: 0.5,\n\n\t\t// enable image smoothing or not for canvas copy - default to true\n\t\t// https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/imageSmoothingEnabled\n\t\timageSmoothingEnabled : false,\n\t}\n\t// parameters sanity check\n\tconsole.assert(['artoolkit'].indexOf(this.parameters.trackingBackend) !== -1, 'invalid parameter trackingBackend', this.parameters.trackingBackend)\n\tconsole.assert(['color', 'color_and_matrix', 'mono', 'mono_and_matrix'].indexOf(this.parameters.detectionMode) !== -1, 'invalid parameter detectionMode', this.parameters.detectionMode)\n\n        this.arController = null;\n        this.arucoContext = null;\n\n\t_this.initialized = false\n\n\n\tthis._arMarkersControls = []\n\n\t//////////////////////////////////////////////////////////////////////////////\n\t//\t\tsetParameters\n\t//////////////////////////////////////////////////////////////////////////////\n\tsetParameters(parameters)\n\tfunction setParameters(parameters){\n\t\tif( parameters === undefined )\treturn\n\t\tfor( var key in parameters ){\n\t\t\tvar newValue = parameters[ key ]\n\n\t\t\tif( newValue === undefined ){\n\t\t\t\tconsole.warn( \"THREEx.ArToolkitContext: '\" + key + \"' parameter is undefined.\" )\n\t\t\t\tcontinue\n\t\t\t}\n\n\t\t\tvar currentValue = _this.parameters[ key ]\n\n\t\t\tif( currentValue === undefined ){\n\t\t\t\tconsole.warn( \"THREEx.ArToolkitContext: '\" + key + \"' is not a property of this material.\" )\n\t\t\t\tcontinue\n\t\t\t}\n\n\t\t\t_this.parameters[ key ] = newValue\n\t\t}\n\t}\n}\n\nObject.assign( ARjs.Context.prototype, EventDispatcher.prototype );\n\n// ARjs.Context.baseURL = '../'\n// default to github page\nARjs.Context.baseURL = 'https://jeromeetienne.github.io/AR.js/three.js/'\nARjs.Context.REVISION = '1.6.0'\n\n\n\n/**\n * Create a default camera for this trackingBackend\n * @param {string} trackingBackend - the tracking to user\n * @return {THREE.Camera} the created camera\n */\nARjs.Context.createDefaultCamera = function( trackingBackend ){\n\tconsole.assert(false, 'use ARjs.Utils.createDefaultCamera instead')\n\t// Create a camera\n\tif( trackingBackend === 'artoolkit' ){\n\t\tvar camera = new Camera();\n\t}else console.assert(false)\n\treturn camera\n}\n\n\n//////////////////////////////////////////////////////////////////////////////\n//\t\tinit functions\n//////////////////////////////////////////////////////////////////////////////\n\nARjs.Context.prototype.init = function(onCompleted){\n\tvar _this = this\n\tif( this.parameters.trackingBackend === 'artoolkit' ){\n\t\tthis._initArtoolkit(done)\n\t}else console.assert(false)\n\treturn\n\n\tfunction done(){\n\t\t// dispatch event\n\t\t_this.dispatchEvent({\n\t\t\ttype: 'initialized'\n\t\t});\n\n\t\t_this.initialized = true\n\n\t\tonCompleted && onCompleted()\n\t}\n\n}\n////////////////////////////////////////////////////////////////////////////////\n//          update function\n////////////////////////////////////////////////////////////////////////////////\nARjs.Context.prototype.update = function(srcElement){\n\n\t// be sure arController is fully initialized\n        if(this.parameters.trackingBackend === 'artoolkit' && this.arController === null) return false;\n\n\t// honor this.parameters.maxDetectionRate\n\tvar present = performance.now()\n\tif( this._updatedAt !== null && present - this._updatedAt < 1000/this.parameters.maxDetectionRate ){\n\t\treturn false\n\t}\n\tthis._updatedAt = present\n\n\t// mark all markers to invisible before processing this frame\n\tthis._arMarkersControls.forEach(function(markerControls){\n\t\tmarkerControls.object3d.visible = false\n\t})\n\n\t// process this frame\n\tif(this.parameters.trackingBackend === 'artoolkit'){\n\t\tthis._updateArtoolkit(srcElement)\n\t} else {\n\t\tconsole.assert(false)\n\t}\n\n\t// dispatch event\n\tthis.dispatchEvent({\n\t\ttype: 'sourceProcessed'\n\t});\n\n\n\t// return true as we processed the frame\n\treturn true;\n}\n\n////////////////////////////////////////////////////////////////////////////////\n//          Add/Remove markerControls\n////////////////////////////////////////////////////////////////////////////////\nARjs.Context.prototype.addMarker = function(arMarkerControls){\n\tconsole.assert(arMarkerControls instanceof THREEx.ArMarkerControls)\n\tthis._arMarkersControls.push(arMarkerControls)\n}\n\nARjs.Context.prototype.removeMarker = function(arMarkerControls){\n\tconsole.assert(arMarkerControls instanceof THREEx.ArMarkerControls);\n\tconst index = this._arMarkersControls.findIndex(marker => marker.id === arMarkerControls.id);\n\tthis._arMarkersControls.splice(index, 1);\n}\n\n//////////////////////////////////////////////////////////////////////////////\n//\t\tartoolkit specific\n//////////////////////////////////////////////////////////////////////////////\nARjs.Context.prototype._initArtoolkit = function(onCompleted){\n        var _this = this\n\n\t// set this._artoolkitProjectionAxisTransformMatrix to change artoolkit projection matrix axis to match usual webgl one\n\tthis._artoolkitProjectionAxisTransformMatrix = new Matrix4()\n\tthis._artoolkitProjectionAxisTransformMatrix.multiply(new Matrix4().makeRotationY(Math.PI))\n\tthis._artoolkitProjectionAxisTransformMatrix.multiply(new Matrix4().makeRotationZ(Math.PI))\n\n\t// get cameraParameters\n        var cameraParameters = new ARCameraParam(_this.parameters.cameraParametersUrl, function(){\n        \t// init controller\n                var arController = new ARController(_this.parameters.canvasWidth, _this.parameters.canvasHeight, cameraParameters);\n                _this.arController = arController\n\n\t\t// honor this.parameters.imageSmoothingEnabled\n\t\tarController.ctx.mozImageSmoothingEnabled = _this.parameters.imageSmoothingEnabled;\n\t\tarController.ctx.webkitImageSmoothingEnabled = _this.parameters.imageSmoothingEnabled;\n\t\tarController.ctx.msImageSmoothingEnabled = _this.parameters.imageSmoothingEnabled;\n\t\tarController.ctx.imageSmoothingEnabled = _this.parameters.imageSmoothingEnabled;\n\n\t\t// honor this.parameters.debug\n                if( _this.parameters.debug === true ){\n\t\t\tarController.debugSetup();\n\t\t\tarController.canvas.style.position = 'absolute'\n\t\t\tarController.canvas.style.top = '0px'\n\t\t\tarController.canvas.style.opacity = '0.6'\n\t\t\tarController.canvas.style.pointerEvents = 'none'\n\t\t\tarController.canvas.style.zIndex = '-1'\n\t\t}\n\n\t\t// setPatternDetectionMode\n\t\tvar detectionModes = {\n\t\t\t'color'\t\t\t: artoolkit.AR_TEMPLATE_MATCHING_COLOR,\n\t\t\t'color_and_matrix'\t: artoolkit.AR_TEMPLATE_MATCHING_COLOR_AND_MATRIX,\n\t\t\t'mono'\t\t\t: artoolkit.AR_TEMPLATE_MATCHING_MONO,\n\t\t\t'mono_and_matrix'\t: artoolkit.AR_TEMPLATE_MATCHING_MONO_AND_MATRIX,\n\t\t}\n\t\tvar detectionMode = detectionModes[_this.parameters.detectionMode]\n\t\tconsole.assert(detectionMode !== undefined)\n\t\tarController.setPatternDetectionMode(detectionMode);\n\n\t\t// setMatrixCodeType\n\t\tvar matrixCodeTypes = {\n\t\t\t'3x3'\t\t: artoolkit.AR_MATRIX_CODE_3x3,\n\t\t\t'3x3_HAMMING63'\t: artoolkit.AR_MATRIX_CODE_3x3_HAMMING63,\n\t\t\t'3x3_PARITY65'\t: artoolkit.AR_MATRIX_CODE_3x3_PARITY65,\n\t\t\t'4x4'\t\t: artoolkit.AR_MATRIX_CODE_4x4,\n\t\t\t'4x4_BCH_13_9_3': artoolkit.AR_MATRIX_CODE_4x4_BCH_13_9_3,\n\t\t\t'4x4_BCH_13_5_5': artoolkit.AR_MATRIX_CODE_4x4_BCH_13_5_5,\n\t\t}\n\t\tvar matrixCodeType = matrixCodeTypes[_this.parameters.matrixCodeType]\n\t\tconsole.assert(matrixCodeType !== undefined)\n\t\tarController.setMatrixCodeType(matrixCodeType);\n\n\t\t// set the patternRatio for artoolkit\n\t\tarController.setPattRatio(_this.parameters.patternRatio);\n\n\t\t// set thresholding in artoolkit\n\t\t// this seems to be the default\n\t\t// arController.setThresholdMode(artoolkit.AR_LABELING_THRESH_MODE_MANUAL)\n\t\t// adatative consume a LOT of cpu...\n\t\t// arController.setThresholdMode(artoolkit.AR_LABELING_THRESH_MODE_AUTO_ADAPTIVE)\n\t\t// arController.setThresholdMode(artoolkit.AR_LABELING_THRESH_MODE_AUTO_OTSU)\n\n\t\t// notify\n\t\tonCompleted()\n\t})\n\treturn this\n}\n\n/**\n * return the projection matrix\n */\nARjs.Context.prototype.getProjectionMatrix = function(srcElement){\n\n\n// FIXME rename this function to say it is artoolkit specific - getArtoolkitProjectMatrix\n// keep a backward compatibility with a console.warn\n\n\tconsole.assert( this.parameters.trackingBackend === 'artoolkit' )\n\tconsole.assert(this.arController, 'arController MUST be initialized to call this function')\n\t// get projectionMatrixArr from artoolkit\n\tvar projectionMatrixArr = this.arController.getCameraMatrix();\n\tvar projectionMatrix = new Matrix4().fromArray(projectionMatrixArr)\n\n\t// apply context._axisTransformMatrix - change artoolkit axis to match usual webgl one\n\tprojectionMatrix.multiply(this._artoolkitProjectionAxisTransformMatrix)\n\n\t// return the result\n\treturn projectionMatrix\n}\n\nARjs.Context.prototype._updateArtoolkit = function(srcElement){\n\tthis.arController.process(srcElement)\n}\n","import { EventDispatcher } from 'three';\n\nwindow.THREEx = window.THREEx || {};\n\nconst { THREEx } = window;\n\nTHREEx.ArBaseControls = function(object3d){\n\tthis.id = THREEx.ArBaseControls.id++\n\n\tthis.object3d = object3d\n\tthis.object3d.matrixAutoUpdate = false;\n\tthis.object3d.visible = false\n\n\t// Events to honor\n\t// this.dispatchEvent({ type: 'becameVisible' })\n\t// this.dispatchEvent({ type: 'markerVisible' })\t// replace markerFound\n\t// this.dispatchEvent({ type: 'becameUnVisible' })\n}\n\nTHREEx.ArBaseControls.id = 0\n\nObject.assign(THREEx.ArBaseControls.prototype, EventDispatcher.prototype);\n\n//////////////////////////////////////////////////////////////////////////////\n//\t\tFunctions\n//////////////////////////////////////////////////////////////////////////////\n/**\n * error catching function for update()\n */\nTHREEx.ArBaseControls.prototype.update = function(){\n\tconsole.assert(false, 'you need to implement your own update')\n}\n\n/**\n * error catching function for name()\n */\nTHREEx.ArBaseControls.prototype.name = function(){\n\tconsole.assert(false, 'you need to implement your own .name()')\n\treturn 'Not yet implemented - name()'\n}\n","import { Matrix4 } from 'three';\r\n\r\nwindow.ARjs = window.ARjs || {};\r\nwindow.THREEx = window.THREEx || {};\r\n\r\nconst { artoolkit, ARjs, THREEx } = window;\r\n\r\n\r\nARjs.MarkerControls = THREEx.ArMarkerControls = function(context, object3d, parameters){\r\n\tvar _this = this\r\n\r\n\tTHREEx.ArBaseControls.call(this, object3d)\r\n\r\n\tthis.context = context\r\n\t// handle default parameters\r\n\tthis.parameters = {\r\n\t\t// size of the marker in meter\r\n\t\tsize : 1,\r\n\t\t// type of marker - ['pattern', 'barcode', 'unknown' ]\r\n\t\ttype : 'unknown',\r\n\t\t// url of the pattern - IIF type='pattern'\r\n\t\tpatternUrl : null,\r\n\t\t// value of the barcode - IIF type='barcode'\r\n\t\tbarcodeValue : null,\r\n\t\t// change matrix mode - [modelViewMatrix, cameraTransformMatrix]\r\n\t\tchangeMatrixMode : 'modelViewMatrix',\r\n\t\t// minimal confidence in the marke recognition - between [0, 1] - default to 1\r\n\t\tminConfidence: 0.6,\r\n\t}\r\n\r\n\t// sanity check\r\n\tvar possibleTypeValues = ['pattern', 'barcode', 'unknown']\r\n\tconsole.assert(possibleTypeValues.indexOf(this.parameters.type) !== -1, 'illegal value', this.parameters.type)\r\n\tvar possibleMatrixModeValues = ['modelViewMatrix', 'cameraTransformMatrix' ]\r\n\tconsole.assert(possibleMatrixModeValues.indexOf(this.parameters.changeMatrixMode) !== -1, 'illegal value', this.parameters.changeMatrixMode)\r\n\r\n\r\n        // create the marker Root\r\n\tthis.object3d = object3d\r\n\tthis.object3d.matrixAutoUpdate = false;\r\n\tthis.object3d.visible = false;\r\n\r\n\t//////////////////////////////////////////////////////////////////////////////\r\n\t//\t\tsetParameters\r\n\t//////////////////////////////////////////////////////////////////////////////\r\n\tsetParameters(parameters)\r\n\tfunction setParameters(parameters){\r\n\t\tif( parameters === undefined )\treturn\r\n\t\tfor( var key in parameters ){\r\n\t\t\tvar newValue = parameters[ key ]\r\n\r\n\t\t\tif( newValue === undefined ){\r\n\t\t\t\tconsole.warn( \"THREEx.ArMarkerControls: '\" + key + \"' parameter is undefined.\" )\r\n\t\t\t\tcontinue\r\n\t\t\t}\r\n\r\n\t\t\tvar currentValue = _this.parameters[ key ]\r\n\r\n\t\t\tif( currentValue === undefined ){\r\n\t\t\t\tconsole.warn( \"THREEx.ArMarkerControls: '\" + key + \"' is not a property of this material.\" )\r\n\t\t\t\tcontinue\r\n\t\t\t}\r\n\r\n\t\t\t_this.parameters[ key ] = newValue\r\n\t\t}\r\n\t}\r\n\r\n\t//////////////////////////////////////////////////////////////////////////////\r\n\t//\t\tCode Separator\r\n\t//////////////////////////////////////////////////////////////////////////////\r\n\t// add this marker to artoolkitsystem\r\n\t// TODO rename that .addMarkerControls\r\n\tcontext.addMarker(this)\r\n\r\n\tif( _this.context.parameters.trackingBackend === 'artoolkit' ){\r\n\t\tthis._initArtoolkit()\r\n\t}else console.assert(false)\r\n}\r\n\r\nARjs.MarkerControls.prototype = Object.create( THREEx.ArBaseControls.prototype );\r\nARjs.MarkerControls.prototype.constructor = THREEx.ArMarkerControls;\r\n\r\nARjs.MarkerControls.prototype.dispose = function(){\r\n\tthis.context.removeMarker(this)\r\n\r\n\t// TODO remove the event listener if needed\r\n\t// unloadMaker ???\r\n}\r\n\r\n//////////////////////////////////////////////////////////////////////////////\r\n//\t\tupdate controls with new modelViewMatrix\r\n//////////////////////////////////////////////////////////////////////////////\r\n\r\n/**\r\n * When you actually got a new modelViewMatrix, you need to perfom a whole bunch\r\n * of things. it is done here.\r\n */\r\nARjs.MarkerControls.prototype.updateWithModelViewMatrix = function(modelViewMatrix){\r\n\tvar markerObject3D = this.object3d;\r\n\r\n\t// mark object as visible\r\n\tmarkerObject3D.visible = true\r\n\r\n\tif( this.context.parameters.trackingBackend === 'artoolkit' ){\r\n\t\tvar tmpMatrix = new Matrix4().copy(this.context._artoolkitProjectionAxisTransformMatrix);\r\n\t\tvar markerAxisTransformMatrix = new Matrix4().makeRotationX(Math.PI/2);\r\n\t\ttmpMatrix.multiply(modelViewMatrix)\r\n\t\ttmpMatrix.multiply(markerAxisTransformMatrix)\r\n\t\tmodelViewMatrix.copy(tmpMatrix)\r\n\t}\r\n\r\n\t// change markerObject3D.matrix based on parameters.changeMatrixMode\r\n\tif( this.parameters.changeMatrixMode === 'modelViewMatrix' ){\r\n\t  markerObject3D.matrix.copy(modelViewMatrix)\r\n\t}else if( this.parameters.changeMatrixMode === 'cameraTransformMatrix' ){\r\n\t\tmarkerObject3D.matrix.getInverse(modelViewMatrix)\r\n\t}else {\r\n\t\tconsole.assert(false)\r\n\t}\r\n\r\n\t// decompose - the matrix into .position, .quaternion, .scale\r\n\tmarkerObject3D.matrix.decompose(markerObject3D.position, markerObject3D.quaternion, markerObject3D.scale)\r\n\r\n\t// dispatchEvent\r\n\tthis.dispatchEvent({\r\n\t\ttype: 'markerPositionUpdated',\r\n\t\tdata: markerObject3D.matrix.toArray()\r\n\t});\r\n}\r\n\r\n//////////////////////////////////////////////////////////////////////////////\r\n//\t\tutility functions\r\n//////////////////////////////////////////////////////////////////////////////\r\n\r\n/**\r\n * provide a name for a marker\r\n * - silly heuristic for now\r\n * - should be improved\r\n */\r\nARjs.MarkerControls.prototype.name = function(){\r\n\tvar name = ''\r\n\tname += this.parameters.type;\r\n\tif( this.parameters.type === 'pattern' ){\r\n\t\tvar url = this.parameters.patternUrl\r\n\t\tvar basename = url.replace(/^.*\\//g, '')\r\n\t\tname += ' - ' + basename\r\n\t}else if( this.parameters.type === 'barcode' ){\r\n\t\tname += ' - ' + this.parameters.barcodeValue\r\n\t}else{\r\n\t\tconsole.assert(false, 'no .name() implemented for this marker controls')\r\n\t}\r\n\treturn name\r\n}\r\n\r\n//////////////////////////////////////////////////////////////////////////////\r\n//\t\tinit for Artoolkit\r\n//////////////////////////////////////////////////////////////////////////////\r\nARjs.MarkerControls.prototype._initArtoolkit = function(){\r\n\tvar _this = this\r\n\r\n\tvar artoolkitMarkerId = null\r\n\r\n\tvar delayedInitTimerId = setInterval(function(){\r\n\t\t// check if arController is init\r\n\t\tvar arController = _this.context.arController\r\n\t\tif( arController === null )\treturn\r\n\t\t// stop looping if it is init\r\n\t\tclearInterval(delayedInitTimerId)\r\n\t\tdelayedInitTimerId = null\r\n\t\t// launch the _postInitArtoolkit\r\n\t\tpostInit()\r\n\t}, 1000/50)\r\n\r\n\treturn\r\n\r\n\tfunction postInit(){\r\n\t\t// check if arController is init\r\n\t\tvar arController = _this.context.arController\r\n\t\tconsole.assert(arController !== null )\r\n\r\n\t\t// start tracking this pattern\r\n\t\tif( _this.parameters.type === 'pattern' ){\r\n\t                arController.loadMarker(_this.parameters.patternUrl, function(markerId) {\r\n\t\t\t\tartoolkitMarkerId = markerId\r\n\t                        arController.trackPatternMarkerId(artoolkitMarkerId, _this.parameters.size);\r\n\t                });\r\n\t\t}else if( _this.parameters.type === 'barcode' ){\r\n\t\t\tartoolkitMarkerId = _this.parameters.barcodeValue\r\n\t\t\tarController.trackBarcodeMarkerId(artoolkitMarkerId, _this.parameters.size);\r\n\t\t}else if( _this.parameters.type === 'unknown' ){\r\n\t\t\tartoolkitMarkerId = null\r\n\t\t}else{\r\n\t\t\tconsole.log(false, 'invalid marker type', _this.parameters.type)\r\n\t\t}\r\n\r\n\t\t// listen to the event\r\n\t\tarController.addEventListener('getMarker', function(event){\r\n\t\t\tif( event.data.type === artoolkit.PATTERN_MARKER && _this.parameters.type === 'pattern' ){\r\n\t\t\t\tif( artoolkitMarkerId === null )\treturn\r\n\t\t\t\tif( event.data.marker.idPatt === artoolkitMarkerId ) onMarkerFound(event)\r\n\t\t\t}else if( event.data.type === artoolkit.BARCODE_MARKER && _this.parameters.type === 'barcode' ){\r\n\t\t\t\t// console.log('BARCODE_MARKER idMatrix', event.data.marker.idMatrix, artoolkitMarkerId )\r\n\t\t\t\tif( artoolkitMarkerId === null )\treturn\r\n\t\t\t\tif( event.data.marker.idMatrix === artoolkitMarkerId )  onMarkerFound(event)\r\n\t\t\t}else if( event.data.type === artoolkit.UNKNOWN_MARKER && _this.parameters.type === 'unknown'){\r\n\t\t\t\tonMarkerFound(event)\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t}\r\n\r\n\tfunction onMarkerFound(event){\r\n\t\t// honor his.parameters.minConfidence\r\n\t\tif( event.data.type === artoolkit.PATTERN_MARKER && event.data.marker.cfPatt < _this.parameters.minConfidence )\treturn\r\n\t\tif( event.data.type === artoolkit.BARCODE_MARKER && event.data.marker.cfMatt < _this.parameters.minConfidence )\treturn\r\n\r\n\t\tvar modelViewMatrix = new Matrix4().fromArray(event.data.matrix)\r\n\t\t_this.updateWithModelViewMatrix(modelViewMatrix)\r\n\t}\r\n}\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from 'components/App';\n\nimport 'scripts/threex-artoolkitsource';\nimport 'scripts/threex-artoolkitcontext';\nimport 'scripts/threex-arbasecontrols';\nimport 'scripts/threex-armarkercontrols';\nimport 'scripts/threex-arsmoothedcontrols';\nimport * as serviceWorker from './serviceWorker';\n\nimport './index.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}